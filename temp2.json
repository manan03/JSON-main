{
    "InstanceSecurityGroup": {
        "Type1": "AWS::EC2::SecurityGroup",
        "Properties": {
            "GroupDescription": "Enable SSH access and HTTP access on the inbound port",
            "SecurityGroupIngress": [
                {
                    "IpProtocol": "tcp",
                    "FromPort": "80",
                    "ToPort": "80",
                    "SourceSecurityGroupId": {
                        "Fn::Select": [
                            0,
                            {
                                "Fn::GetAtt": [
                                    "ApplicationLoadBalancer",
                                    "SecurityGroups"
                                ]
                            }
                        ]
                    }
                },
                {
                    "IpProtocol": "tcp",
                    "FromPort": "22",
                    "ToPort": "22",
                    "CidrIp": {
                        "Ref": "SSHLocation"
                    }
                }
            ],
            "VpcId": {
                "Ref": "VpcId"
            }
        }
    }
}